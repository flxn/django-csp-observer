{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<title>CSP Observer Admin - {% block title %}Base{% endblock title %}</title>
<meta name="description" content="A framework for launching new Django projects quickly.">
<meta name="author" content="">
<link rel="shortcut icon" type="image/x-icon" href="{% static 'csp_observer/img/favicon.ico' %}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>

{% block css %}
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="{% static 'csp_observer/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'csp_observer/css/Chart.min.css' %}">
<link rel="stylesheet" href="{% static 'csp_observer/css/base.css' %}">
{% endblock %}

{% csrf_token %}
<script>
window.csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
</script>
</head>

<body>
  <main role="main">
    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <h5 class="my-0 mr-md-auto font-weight-normal">
        <a href="{% url 'admin' %}">CSP Observer Admin</a>
      </h5>
      <nav class="my-2 my-md-0 mr-md-3">

      </nav>
    </div>
  </main>

  <div id="cspo-main-container" class="container">
    <div class="row">
      <div class="col-md-12">
        {% block content %}
          <p>Default content...</p>
        {% endblock content %}
      </div>
    </div>
    
    <div class="row">
      <div class ="col-md-12">
        {% block reportTable %}
          <p>Report Table...</p>
        {% endblock reportTable %}
      </div>
    </div>
    
    <div class="row">
      <div class ="col-md-12" style="margin-top:60px;">
        {% block rulesTable %}
          <p>Rules Table...</p>
        {% endblock rulesTable %}
      </div>
    </div>
    
    <div class="row mt-5">
      <div class="col">
        <div class="card">
          <div class="card-header">Active Settings</div>
          <div class="card-body">
            <p>For more info about the different settings and how to change them <a href="https://github.com/flxn/django-csp-observer" target="_blank">view the README</a></p>
            {% block settingsTable %}
              <p>Settings Table...</p>
            {% endblock settingsTable %}
          </div>
        </div>
      </div>
  
      <div class="col">
        
        <div class="row">
          <div class="card" style="width:100%">
            <div class="card-header">Rule Database</div>
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <p class="card-title">
                    Entries: <strong>{{global_rules.count}}</strong><br/>
                    Last Updated: <strong>{{global_rules.last_updated}}</strong>
                  </p>
                </div>
                <div class="col">
                  <button onclick="checkRuleUpdate()" type="button" class="btn btn-primary float-right" role="button">Check For Update</button>
                </div>
              </div>
              <div id="rule-update-response" class="alert" role="alert" style="display: none;"></div>
              
              
              <br>
              <div>
                {% block globalRulesTable %}
                  <p>Rules Table...</p>
                {% endblock globalRulesTable %}
              </div>
            </div>
          </div>
        </div>
    
        <div class="row mt-3">
          <div class="card" style="width:100%">
            <div class="card-header">Diagram One</div>
            <div class="card-body">
              <h5 class="card-title">Diagram of something</h5>
              <br>
              <div>
                <canvas id="diagramOne" class="mx-auto" style="max-width: 500px;"></canvas>
              </div>
            </div>
          </div>
        </div>
        
        <div class="row mt-3">
          <div class="card" style="width:100%">
            <div class="card-header">Diagram Two</div>
            <div class="card-body">
              <h5 class="card-title">Another diagram</h5>
              <br>
              <div>
                <canvas id="diagramTwo" class="mx-auto" style="max-width: 500px;"></canvas>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    
  </div>
  

  <footer class="footer mt-5">
    <p class="text-muted text-center">
      <a href="https://github.com/flxn/django-csp-observer" target="_blank">django-csp-observer</a> | The source code is licensed MIT.
    </p>
  </footer>


  {% block javascript %}
  <!-- Bootstrap JavaScript -->
  <script src="{% static 'csp_observer/js/jquery.min.js' %}"></script>
  <script src="{% static 'csp_observer/js/bootstrap.min.js' %}"></script>

  <!-- 3rd party JavaScript -->
  <script src="{% static 'csp_observer/js/Chart.min.js' %}"></script>

  <!-- Project JS -->
  <script src="{% static 'csp_observer/js/base.js' %}"></script>
  <script src="{% static 'csp_observer/js/pieCharts.js' %}"></script>

  {% endblock javascript %}

</body>
</html>
